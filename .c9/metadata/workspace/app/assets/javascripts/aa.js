{"filter":false,"title":"aa.js","tooltip":"/app/assets/javascripts/aa.js","undoManager":{"mark":1,"position":1,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":71,"column":5},"action":"insert","lines":["  angular.module('instanoad', ['ngRoute', 'instagramService'])","   .constant('access_token', null)","   .constant(\"loginAddr\", \"https://api.instagram.com/oauth/authorize/?client_id=369c6cd0f2254df6acfaf3045ddf78b5&redirect_uri=https://instanoad-mrjumpy.c9.io&response_type=code\")","   .value('authCode', 1)","   .run(function(loginAddr, authCode, $http, access_token, instagramService) {","","    if (window.location.search.indexOf('code=') != -1) {","     authCode = window.location.search.split('code=')[1];","     instagramService.getAccessToken(authCode, loginAddr).then(function(data) {","      instagramService.listPics(data).then(function(response) {","       console.log(response);","      });","","     });","","    }","    else {","     window.location = loginAddr;","    }","   })","   .controller('loginCtrl', function($rootScope, $scope, loginAddr, $location, $http) {","","    $scope.loginInstagram = function() {","     window.location = loginAddr;","","","    };","    $scope.authAddr = loginAddr;","","","   });","","  angular.module('instagramService', []).factory('instagramService', function($http, $q) {","   var service = {};","","   service.listPics = function(data) {","    var url = 'https://api.instagram.com/v1/users/' + data.user.id + '/media/recent/?access_token=' + data.access_token","","    var promise = $.ajax({","     type: \"GET\",","     dataType: \"jsonp\",","     url: url,","     success: function(data) {","      return data;","     }","    });","    return promise;","   };","","   service.getAccessToken = function(authCode, loginAddr) {","    var promise = $http.post('/login', {","     method: \"POST\",","     data: {","      code: authCode","     }","    }, {","     withCredentials: true","    }).then(function(response) {","     if (response.data.code == 400) {","      window.location = loginAddr;","      return;","     }","","     return response.data;","","","    });","    return promise;","   }","","   return service;","  });"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":3},"end":{"row":1,"column":6},"action":"insert","lines":["   "]},{"start":{"row":2,"column":0},"end":{"row":2,"column":3},"action":"insert","lines":["   "]},{"start":{"row":3,"column":3},"end":{"row":3,"column":6},"action":"insert","lines":["   "]},{"start":{"row":4,"column":0},"end":{"row":4,"column":3},"action":"insert","lines":["   "]},{"start":{"row":6,"column":4},"end":{"row":6,"column":10},"action":"insert","lines":["      "]},{"start":{"row":7,"column":5},"end":{"row":7,"column":14},"action":"insert","lines":["         "]},{"start":{"row":8,"column":0},"end":{"row":8,"column":9},"action":"insert","lines":["         "]},{"start":{"row":9,"column":6},"end":{"row":9,"column":18},"action":"insert","lines":["            "]},{"start":{"row":10,"column":7},"end":{"row":10,"column":22},"action":"insert","lines":["               "]},{"start":{"row":11,"column":6},"end":{"row":11,"column":18},"action":"insert","lines":["            "]},{"start":{"row":13,"column":5},"end":{"row":13,"column":14},"action":"insert","lines":["         "]},{"start":{"row":15,"column":4},"end":{"row":15,"column":10},"action":"insert","lines":["      "]},{"start":{"row":16,"column":4},"end":{"row":16,"column":10},"action":"insert","lines":["      "]},{"start":{"row":17,"column":0},"end":{"row":17,"column":9},"action":"insert","lines":["         "]},{"start":{"row":18,"column":4},"end":{"row":18,"column":10},"action":"insert","lines":["      "]},{"start":{"row":19,"column":3},"end":{"row":19,"column":6},"action":"insert","lines":["   "]},{"start":{"row":20,"column":0},"end":{"row":20,"column":3},"action":"insert","lines":["   "]},{"start":{"row":22,"column":0},"end":{"row":22,"column":6},"action":"insert","lines":["      "]},{"start":{"row":23,"column":5},"end":{"row":23,"column":14},"action":"insert","lines":["         "]},{"start":{"row":26,"column":4},"end":{"row":26,"column":10},"action":"insert","lines":["      "]},{"start":{"row":27,"column":0},"end":{"row":27,"column":3},"action":"insert","lines":["   "]},{"start":{"row":27,"column":7},"end":{"row":27,"column":10},"action":"insert","lines":["   "]},{"start":{"row":30,"column":0},"end":{"row":30,"column":3},"action":"insert","lines":["   "]},{"start":{"row":33,"column":3},"end":{"row":33,"column":6},"action":"insert","lines":["   "]},{"start":{"row":35,"column":0},"end":{"row":35,"column":3},"action":"insert","lines":["   "]},{"start":{"row":36,"column":4},"end":{"row":36,"column":10},"action":"insert","lines":["      "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":6},"action":"insert","lines":["      "]},{"start":{"row":39,"column":5},"end":{"row":39,"column":14},"action":"insert","lines":["         "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":9},"action":"insert","lines":["         "]},{"start":{"row":41,"column":5},"end":{"row":41,"column":14},"action":"insert","lines":["         "]},{"start":{"row":42,"column":5},"end":{"row":42,"column":14},"action":"insert","lines":["         "]},{"start":{"row":43,"column":6},"end":{"row":43,"column":18},"action":"insert","lines":["            "]},{"start":{"row":44,"column":5},"end":{"row":44,"column":14},"action":"insert","lines":["         "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":6},"action":"insert","lines":["      "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":6},"action":"insert","lines":["      "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":1},"action":"insert","lines":[" "]},{"start":{"row":47,"column":4},"end":{"row":47,"column":6},"action":"insert","lines":["  "]},{"start":{"row":49,"column":0},"end":{"row":49,"column":3},"action":"insert","lines":["   "]},{"start":{"row":50,"column":4},"end":{"row":50,"column":10},"action":"insert","lines":["      "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":9},"action":"insert","lines":["         "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":9},"action":"insert","lines":["         "]},{"start":{"row":53,"column":6},"end":{"row":53,"column":18},"action":"insert","lines":["            "]},{"start":{"row":54,"column":5},"end":{"row":54,"column":14},"action":"insert","lines":["         "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":3},"action":"insert","lines":["   "]},{"start":{"row":55,"column":7},"end":{"row":55,"column":10},"action":"insert","lines":["   "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":9},"action":"insert","lines":["         "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":6},"action":"insert","lines":["      "]},{"start":{"row":58,"column":5},"end":{"row":58,"column":14},"action":"insert","lines":["         "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":12},"action":"insert","lines":["            "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":12},"action":"insert","lines":["            "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":9},"action":"insert","lines":["         "]},{"start":{"row":63,"column":0},"end":{"row":63,"column":9},"action":"insert","lines":["         "]},{"start":{"row":66,"column":4},"end":{"row":66,"column":10},"action":"insert","lines":["      "]},{"start":{"row":67,"column":0},"end":{"row":67,"column":6},"action":"insert","lines":["      "]},{"start":{"row":68,"column":3},"end":{"row":68,"column":6},"action":"insert","lines":["   "]},{"start":{"row":70,"column":0},"end":{"row":70,"column":3},"action":"insert","lines":["   "]}]}]]},"ace":{"folds":[],"scrolltop":883,"scrollleft":0,"selection":{"start":{"row":59,"column":27},"end":{"row":59,"column":27},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":45,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1427008875243,"hash":"257a33ab34b28c5b2929faef08d169313db5b7e4"}